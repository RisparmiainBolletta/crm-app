<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <title>CRM - Clienti</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f6f8;
            margin: 0;
            padding: 0 20px;
        }

        header {
            background-color: #2c3e50;
            color: white;
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        header img {
            height: 40px;
            margin-right: 10px;
        }

        h2 {
            margin: 0;
            font-size: 20px;
        }

        .logout {
            background-color: #e74c3c;
            border: none;
            padding: 8px 14px;
            color: white;
            cursor: pointer;
            border-radius: 4px;
        }

        #btn-nuovo {
            background-color: #3498db;
            color: white;
            padding: 8px 14px;
            border: none;
            border-radius: 4px;
            margin: 20px 0;
            cursor: pointer;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            background: white;
        }

        th, td {
            padding: 12px;
            border: 1px solid #ddd;
            text-align: left;
        }

        th {
            background-color: #ecf0f1;
        }

        .mini-btn {
            background: none;
            border: none;
            color: #2980b9;
            cursor: pointer;
            font-size: 14px;
            margin-right: 6px;
        }

        .sezione-extra {
            background-color: #ecf0f1;
            padding: 15px;
            border: 1px solid #bdc3c7;
            border-radius: 6px;
            margin-top: 10px;
        }

        .actions-dropdown {
            display: flex;
            gap: 5px;
            flex-wrap: wrap;
        }
    </style>
</head>
<body>
    <header>
        <div style="display:flex; align-items:center;">
            <img src="logo.png" alt="Logo">
            <h2>Benvenuto, <span id="nome-agente">Agente</span></h2>
        </div>
        <button class="logout" onclick="logout()">Logout</button>
    </header>

    <button id="btn-nuovo" onclick="mostraFormNuovoCliente()">‚ûï Nuovo Cliente</button>

    <table>
        <thead>
            <tr>
                <th>ID</th>
                <th>Nome</th>
                <th>Telefono</th>
                <th>Settore</th>
                <th>Stato</th>
                <th>Azioni</th>
            </tr>
        </thead>
        <tbody id="clienti-body"></tbody>
    </table>

    <div id="modale-nuovo-cliente" style="display:none;"></div>
    <div id="modale-dettagli-cliente" style="display:none;"></div>

    <script>
        function logout() {
            window.location.href = "/logout";
        }

        function mostraFormNuovoCliente() {
            alert("Form di inserimento cliente (da implementare)");
        }

        function mostraDettagliCliente(id) {
            alert("Dettagli cliente: " + id);
        }

        function mostraDocumenti(id) {
            alert("Documenti cliente: " + id);
        }

        function mostraInterazioni(id) {
            alert("Interazioni cliente: " + id);
        }

        function modificaCliente(id) {
            alert("Modifica cliente: " + id);
        }

        const clienti = [
            { ID_Cliente: "AG01-0001", Nome: "Mario Rossi", Telefono: "3331234567", Settore: "Energia", Stato: "Nuovo" },
            { ID_Cliente: "AG01-0002", Nome: "Giulia Bianchi", Telefono: "3497654321", Settore: "Gas", Stato: "Contattato" }
        ];

        window.onload = () => {
            const tbody = document.getElementById("clienti-body");
            clienti.reverse().forEach(c => {
                const tr = document.createElement("tr");
                tr.innerHTML = `
                    <td>${c.ID_Cliente}</td>
                    <td>${c.Nome}</td>
                    <td>${c.Telefono}</td>
                    <td>${c.Settore}</td>
                    <td>${c.Stato}</td>
                    <td>
                        <div class="actions-dropdown">
                            <button class="mini-btn" onclick="mostraDettagliCliente('${c.ID_Cliente}')">üìÑ Dettagli</button>
                            <button class="mini-btn" onclick="mostraDocumenti('${c.ID_Cliente}')">üìé Documenti</button>
                            <button class="mini-btn" onclick="mostraInterazioni('${c.ID_Cliente}')">üìã Interazioni</button>
                            <button class="mini-btn" onclick="modificaCliente('${c.ID_Cliente}')">üìù Modifica</button>
                        </div>
                    </td>
                `;
                tbody.appendChild(tr);
            });
        }
    </script>
</body>
</html>
